language: java
jdk: openjdk15
before_install:
  - cd plugin
install:
  - mvn dependency:resolve
script:
  - mvn test

jobs:
  include:
    # Define the release stage that runs semantic-release
    - stage: release
      deploy:
        provider: script
        skip_cleanup: true
        script: >
          echo 'DOWNLOADINg nvm.sh';
          curl -o ~/.nvm/nvm.sh https://raw.githubusercontent.com/creationix/nvm/v0.31.0/nvm.sh ;
          echo 'DOWNLOADINg lts';
          source ~/.nvm/nvm.sh ;
          nvm install v16.10.0 ;
          echo 'RUNNINg semantic-release';
          npx semantic-release ;
        on:
          all_branches: true
